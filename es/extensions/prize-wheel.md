---
title: Ruleta de La Fortuna (por MarkusoOoO)
description: '"Ruleta de La Fortuna/Ruleta" completamente personalizabla y funcional con OBS desde la versión 27.1.3'
published: true
date: 2022-08-09T17:37:50.439Z
tags: prize, wheel, roulette, template
editor: markdown
dateCreated: 2022-05-18T01:56:58.750Z
---

# Ruleta de La Fortuna [(por MarkusoOoO)](https://www.twitch.tv/markusoooo)

## Descripción
¡"Ruleta de La Fortuna/Ruleta" completamente personalizabla y funcional con OBS desde la versión 27.1.3!

Por favor trata esto como una plantilla de ejemplo vacía.

Puedes encontrar todos los archivos juntos en este [enlace](/extensions/prize-wheel/files/Roulette-by-MarkusoOoO.zip) en una carpeta comprimida y toda las guías de información están en el archivo `Readme.txt`.

Hay dos opciones dentro de esta carpeta comprimida, una es hacer que los elementos en la rueda estén horizontales, y la segunda opción es colocar el texto de manera vertical, así que elige la que más te convenga para empezar (encontrarás más adelante que hay una opción para modificarla tu mismo).

## Código de Importación
```text
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
```


## Instalación
### Prerequisitos
*Streamer.bot v0.1.4+ (En este documento me referiré a Streamer.bot como "SB" de ahora en adelante) >>> https://streamer.bot/

*OBS v27.1.3+ (Si estás usando v27.2.0+ asegúrate de también actualizar el plugin Move Transition (encontrarás el link más adelante) a la versión más reciente, de lo contrario tu OBS se trabará) >>> https://obsproject.com/download

*Plugins de OBS:

- Plugin Websocket Server por Palakis v4.9.1+>>> https://obsproject.com/forum/resources/obs-websocket-remote-control-obs-studio-from-websockets.466/

- Plugin Move Transition por Exeldro v2.5.3+ >>> https://obsproject.com/forum/resources/move-transition.913/

- Plugin Copy source por Exeldro v0.1.3+ >>> https://obsproject.com/forum/resources/source-copy.1261/
---

1/  En Streamer.bot, en el panel de `Importación` de la parte superior izquierda, copia el `Código de Importación` y pégalo en la `Cadena de Importación`.

2/  En SB, en la pestaña de ACciones deberá aparecer una nueva acción en el grupo `Roulette by MarkusoOoO`. Busca una acción llamada `Roulette Answer`, haz click derecho en ella y selecciona copiar `Copy Action Id`. Necesitaremos este ID en el paso 4/, así que guárdalo en algún lugar, o mantenla en el universo de copiado.

3/  Una vez más, en SB navega a la pestaña `Servers/Clients` > `Websocket Server`. Puedes dejar la configuración predeterminada (`Address: 127.0.0.1`, `Port: 8080`, `Endpoint: /`. SI NECESITAS cambiarla por algún motivo, tendrás que cambiar esa configuración también en el archivo `../Roulette Example Horizontal(Vertical) Text/Roulette Source/script.js` en la línea 3, que modificaremos en el paso 4/ de la guía). Puedes marcar `Auto Start`, para no preocuparte por que este servidor no se inicie, y luego presiona `Start Server`. Hemos terminado aquí.

4/  Ahora, necesitaremos pegar nuestro ID de Acción del punto 2/ en `../Roulette Example Horizontal(Vertical) Text/Roulette Source/script.js` en la línea 4 entre comillas simples '' (reemplaza el texto `PUT YOUR ACTION ID IN HERE`). Ahora nuestra ruleta se está comunicando con SB. Lo que supongo es, un gran éxito, o algo.

5/  Ahora podemos abrir OBS y usando el plugin de Exeldro `Copy Source` importa la escena `[NS] Roulette by MarkusoOoO`en OBS. En OBS navega a `Herramientas` > `Source Copy` > `Load Scene` y selecciona `../Roulette Example Horizontal(Vertical) Text/OBS Source/[NS] Roulette by MarkusoOoO.json`. En OBS deberá aparecer esta escena con una fuente de navegador oculta llamada `[BS] Roulette`. ¡Perfecto! Asegúrate de hacer click derecho en esta fuente y selecciona `../Roulette Example Horizontal(Vertical) Text/Roulette Source/index.html`. Cuando hagas click en mostrar la fuente, deberás ver la ruleta girando. Si la ruleta no aparece desde el centro con efecto de Zoom, probablemente no tengas el plugin `Move Transition` instalado correctamente. En la ruleta hay 12 opciones (que pueden ser modificadas más tarde), llamadas actualmente de Test1 a Test12. Bien, oculta esta fuente nuevamente.

6/ De regreso en SB, echemos un vistazo a la acción llamada `Roulette redeem`. Revisa que las sub-acciones `OBS Source Visibility State` estén apuntando a nuestra fuente de navegador `[BS] Roulette` en OBS. Una está hasta arriba, lo que hace esta fuente visible y otra es la penúltima sub-acción, que oculta la fuente nuevamente. Simplemente haz doble click en ellas y asegúrate que estén apuntando a `Scene: [NS] Roulette by MarkusoOoO` y `Source: [BS] Roulette`. Cuando haces click en el menú contextual y no ves nada (o si haces click en "Test" y la fuente no se esconde o aparece, dependiendo de la sub-acción), probablemente no tengas conectado OBS y SB con el plugin `Websocket server`.

7/  Lo único que resta hacer es probar que todo funcione como se esperaba. Puedes crear nuevos comandos en SB para eso. En SB navega a `Comandos`, click derecho > `Add`. En la sección de `Comando` coloca `!test`, por ejemplo (este es el comando que activará nuestra acción desde el chat de Twitch) y en la `Acción` selecciona `Roulette Redeem`. Ahora, si escribes `!test` en tu chat de Twitch, deberás ver la ruleta aparecer y después de que termina de girar, deberás aparecer un texto en tu chat. Dirá la recompensa que obtuviste y cual es el resultado real de la ruleta. Si todo concuerda, ¡Felicidades! ¡Lo hiciste funcionar! Ahora puedes personalizarla para tus necesidades y deseos (o dale un beso a tu peluche favorito de unicornio) <3

¡Importante! - Sugiero colocar la acción `Roulette Redeem` en su propia lista de espera (queue) en SB, o de lo contrario no funcionará debidamente si se usa muchas veces y se traslapa. O al menos coloca un tiempo de espera global de 5 segundos en el comando o recompensa de punto de canal que está activando esta acción.


## Configuración
1/  Obviamente tendrás 12 acciones en SB, y esas podrán ser cambiadas de acuerdo a tus necesidades, si quieres cambiar los títulos de esas opciones, necesitas hacer DOS cosas:

- Cambia el título en `../Roulette Example Horizontal(Vertical) Text/Roulette Source/script.js` en las líneas 10 a 21 (en la lista de variables VUE `prizes`)
- Cambia el valor correspondiente en la sub-acción IF de la acción `Roulette Redeem` (doble click en la sentencia `if` y en el campo `value` cambia uno de los `Test#` a tu título deseado)

2/  Puedes cambiar todos los colores en `../Roulette Example Horizontal Text/Roulette Source/style.css`, esto requiere un poco de conocimiento de CSS

3/  Si sabes de desarrollo web en frontend, puedes personalizar completamente el funcionamiento y vista de ésta ruleta (desde tiempos hasta número de campos, etc.). A continuación enumeraré algunos modificadores avanzados.

### Texto Horizontal/Vertical
Todo lo que hice para hacer el texto vertical es que agregué las siguientes tres líneas en `style.css` en `#wheel p`, en la línea 120:
```
-webkit-transform: rotate(-90deg);
-moz-transform: rotate(-90deg);
writing-mode: vertical-lr;
```

### Opción de Probabilidad/Peso
Cuando abres `script.js` reemplaza toda la `línea 40` con el código que está debajo. Observa los números en brackets `{ ... }` despúes de weightedRand12 en la variable index. Esos son los premios/artículos en la rueda, empezando con `0` - que corresponden con los premios en la `línea 9` y terminando con `11` que corresponde al último artículo en los premios en la `línea 20`. Después de cada premio hay dos puntos `:` y el peso real. En el ejemplo de abajo, estamos diciendo a la rueda que la probabilidad de caer en `premio 0` (`línea 9`) es del 25%, la probabilidad de caer en `premio 9` (`línea 15`) es 50% y la probabilidad de caer en `premio 10` (`línea 19`) es del 25%. Todos los demás premios tienen una probabilidad del 0%. Cuando personalices estos números, asegúrate que los valores sumen el 100% (para tener control completo de la probabilidad).
```
function weightedRand12(spec) {
          var i, sum=0, r=Math.random();
          for (i in spec) {
            sum += spec[i];
            if (r <= sum) return i;
          }
      }
let index = weightedRand12({0:0.25, 1:0.0, 2:0.0, 3:0.0, 4:0.0, 5:0.0, 6:0.50, 7:0.0, 8:0.0, 9:0.0, 10:0.25, 11:0.0});
```

### Agregar/Quitar número de premios/artículos
En `script.js` empezando en la línea 9 hay un arreglo de `premios`. Solo elimina o agrega cuántos premios deseas tener en tu rueda (un ejemplo con 3 premios se incluye en la imagen debajo).

![prize-wheel.png](/extensions/prize-wheel/images/prize-wheel.png)

En `style.css` hice un pequeño cambio para hacer esto más fácil de modificar. En la línea 94 hay un selector de css para la clase `bg`. En la línea 95 deberás cambiar el valor de `transform` a >`rotate(calc(360deg/X));`, donde X es la cantidad de premios que deseas tener en tu rueda (mira la segunda captura de pantalla debajo para mi ejemplo de 3 premios).

![prize-wheel.png](/extensions/prize-wheel/images/prize-wheel1.png)

Si deseas tener más de 12 premios en la rueda (es decir, agregar más de los que hay en la plantilla), necesitarás agregar más código, porque en `style.css` empezando a partir de la línea 75, hay clases especificadas solo para 12 premios. Así que simplemente copia el código mostrado debajo tantas veces como necesites para manipular esos fondos (o de lo contrario los fondos aparecerán en blanco). Solo cambia X por cada número de premio empezando en 13, y colocando tu valor RGB en background-color.
```
#wheel .piece:nth-child(X) .bg {
  background-color: #"RGB VALUE";
}
```